# Changelog

## [Unreleased]

### Добавлено

- Возможность вставлять полную команду с токеном вида `./clo set token <токен>` прямо в поле токена. Аддон сам извлечем нужное значение, упрощая процесс первоначальной настройки для новых пользователей.

### Изменено

- Аддон переведён в разряд стабильных и теперь доступен всем пользователям, даже если у них не включён расширенный режим в профиле.

## [1.4.1] - 2025-03-17

### Добавлено

- Добавлена поддержка `armhf` и `i386`.

## [1.4.0] - 2025-03-09

### Добавлено

- Добавлен watchdog, который автоматически перезапускает клиент CloudPub в случае ошибки инициализации data channel. Ошибка `WebSocket protocol error: Connection reset without closing handshake` может возникать при обрыве интернет-соединения ([issue в upstream](https://github.com/ermakus/cloudpub/issues/3)).

## [1.3.0] - 2025-03-08

### Удалено

- Удалён AppArmor из-за невозможности отладки на всех устройствах (на некоторых приставках AppArmor всё равно не заработал).

## [1.2.0] - 2025-03-08

### Исправлено

- При удалении сервиса из конфигурации аддона он теперь корректно удаляется из CloudPub.

## [1.1.4] - 2025-03-07

### Исправлено

- Исправлен запуск на одноплатных компьютерах и ТВ-приставках с архитектурой `aarch64`: добавлены необходимые разрешения в профиль AppArmor.
- Для архитектуры `aarch64` вновь используется 64-битная версия клиента.

### Изменено

- Скрыты избыточные логи при выполнении команды `clo register`.

## [1.1.3] - 2025-03-07

### Добавлено

- Реализован настраиваемый уровень логирования. Теперь можно выбирать между уровнями: `error`, `warn`, `info`, `debug`.

### Исправлено

- Для архитектуры `aarch64` теперь применяется другая версия клиента, что решает проблему запуска на одноплатных компьютерах и ТВ-приставках.

## [1.1.2] - 2025-03-07

### Исправлено

- В профиль AppArmor добавлены сетевые разрешения, устраняющие ошибку «Failed to connect to supervisor port 80».

## [1.1.1] - 2025-03-07

### Исправлено

- Улучшена обработка ошибок при запуске клиента.
- Добавлена корректная обработка ошибки «Неверный ключ API».

## [1.1.0] - 2025-03-07

### Добавлено

- Добавлен профиль AppArmor для повышения безопасности аддона. Он ограничивает доступ к файловой системе и сетевым ресурсам, предотвращая возможные уязвимости.
- Добавлены значок и логотип для улучшения визуального представления аддона в интерфейсе Home Assistant.

### Изменено

- Документация перенесена в отдельный файл `DOCS.md` для упрощения её сопровождения и чтения.

## [1.0.0] - 2025-03-06

### Первая стабильная версия

- Удаленный доступ к Home Assistant за NAT.
- Поддержка туннелирования HTTP, HTTPS, TCP, UDP и RTSP.
- Простая настройка.
