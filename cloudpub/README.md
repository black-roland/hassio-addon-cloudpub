# Home Assistant Add-on: CloudPub

–≠—Ç–æ—Ç –∞–¥–¥–æ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø –∫ Home Assistant –∏ –¥—Ä—É–≥–∏–º –ª–æ–∫–∞–ª—å–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º –∑–∞ NAT –±–µ–∑ ¬´–±–µ–ª–æ–≥–æ¬ª IP. –≠—Ç–æ –Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ [CloudPub](https://cloudpub.ru/), –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ–π KeenDNS, Dataplicity, Ngrok, Cloudflared –∏ –¥—Ä—É–≥–∏–º –ø–æ–¥–æ–±–Ω—ã–º —Å–µ—Ä–≤–∏—Å–∞–º.

## –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ü—Ä–æ—Å—Ç–æ—Ç–∞**. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞, –≤—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–¥–¥–æ–Ω–∞ –∏ –Ω–∞–∂–∞—Ç—å ¬´–ó–∞–ø—É—Å—Ç–∏—Ç—å¬ª. –ß–µ—Ä–µ–∑ —Å–µ–∫—É–Ω–¥—É –≤–∞—à Home Assistant —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –ø–æ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–π —Å—Å—ã–ª–∫–µ.
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTTPS**. –í–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç HTTPS, –∞ –∑–Ω–∞—á–∏—Ç —Ç—Ä–∞—Ñ–∏–∫ –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ CloudPub –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω.
- **–ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ TCP –∏ UDP**. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ HTTP, –Ω–æ –∏ –¥—Ä—É–≥–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã, –≤–∫–ª—é—á–∞—è RTSP.
- **–°–µ—Ä–≤–µ—Ä—ã –≤ –†–æ—Å—Å–∏–∏**. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –†–æ—Å—Å–∏–∏.

<img src="https://github.com/user-attachments/assets/9aa52fe2-0fda-40ce-a15e-e4c7702c8c19" alt="–õ–æ–≥–∏ –∞–¥–¥–æ–Ω–∞" height="400" />
<img src="https://github.com/user-attachments/assets/32bddd8d-7986-4640-a0d7-66c7fcf50eeb" alt="–°–µ—Ä–≤–∏—Å—ã –≤ CloudPub" height="400" />

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∞–¥–¥–æ–Ω–∞ –¥–æ–±–∞–≤—å—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ Home Assistant. –í—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –≤—Ä—É—á–Ω—É—é, —É–∫–∞–∑–∞–≤ —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (`https://github.com/black-roland/hassio-addon-cloudpub`), –∏–ª–∏ –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ:

[![–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ Home Assistant](https://my.home-assistant.io/badges/supervisor_add_addon_repository.svg)](https://my.home-assistant.io/redirect/supervisor_add_addon_repository/?repository_url=https%3A%2F%2Fgithub.com%2Fblack-roland%2Fhassio-addon-cloudpub)

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –≤—ã —Å–º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Home Assistant.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

–¢–æ–∫–µ–Ω –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –≤ [–ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è CloudPub](https://cloudpub.ru/dashboard/). –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–ª—å–∫–æ —Å–∞–º —Ç–æ–∫–µ–Ω, –±–µ–∑ –∫–æ–º–∞–Ω–¥—ã `./clo set token ` –≤ –Ω–∞—á–∞–ª–µ.

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–¥–¥–æ–Ω–∞

–î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–¥–¥–æ–Ω–∞ —É–∫–∞–∂–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

- **–¢–æ–∫–µ–Ω**: –í–∞—à –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω CloudPub.
- **–°–µ—Ä–≤–∏—Å—ã**: –°–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏. –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
  - **–¢–∏–ø**: –¢–∏–ø —Å–µ—Ä–≤–∏—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `http`, `https`, `tcp`, `udp`, `rtsp`).
  - **–õ–æ–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å**: –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –∏ –ø–æ—Ä—Ç —Å–µ—Ä–≤–∏—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `homeassistant:8123`).
  - **–ò–º—è**: (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ò–º—è —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞.

–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```yaml
token: "–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å"
services:
  - type: http
    local_addr: homeassistant:8123
    name: homeassistant
  - type: tcp
    local_addr: core-mosquitto:1883 # –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Ä—Ç –±–µ–∑ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ SSL
    name: mqtt
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Home Assistant

–ü–æ—Å–∫–æ–ª—å–∫—É Home Assistant –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–æ–≤, –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏ –≤ `configuration.yaml`, —á—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É CloudPub –¥–æ—Å—Ç—É–ø –∫ –≤–∞—à–µ–º—É Home Assistant:

```yaml
http:
  use_x_forwarded_for: true
  trusted_proxies:
    - 172.30.33.0/24
```

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Home Assistant, —á—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞—à Home Assistant –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—ã–π URL, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π CloudPub. –°—Å—ã–ª–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –∂—É—Ä–Ω–∞–ª–µ –∞–¥–¥–æ–Ω–∞. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—É–Ω–Ω–µ–ª—è–º–∏ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ [–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å CloudPub](https://cloudpub.ru/dashboard/).

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–≤—Ç–æ—Ä–∞

–ï—Å–ª–∏ —ç—Ç–æ—Ç –∞–¥–¥–æ–Ω –æ–∫–∞–∑–∞–ª—Å—è –ø–æ–ª–µ–∑–Ω—ã–º, –≤—ã –º–æ–∂–µ—Ç–µ [—É–≥–æ—Å—Ç–∏—Ç—å –∞–≤—Ç–æ—Ä–∞ —á–∞—à–µ—á–∫–æ–π –∫–æ—Ñ–µ](https://mansmarthome.info/donate/#donationalerts). –í–∞—à–∞ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å —Ü–µ–Ω–∏—Ç—Å—è!

#### –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–°–ø–∏—Å–æ–∫ –¥–æ–Ω–∞—Ç–µ—Ä–æ–≤ –ø–æ–∫–∞ –ø—É—Å—Ç, –Ω–æ —è –±—É–¥—É —Ä–∞–¥ –¥–æ–±–∞–≤–∏—Ç—å –≤–∞—à–µ –∏–º—è —Å—é–¥–∞! üòä
